# OA 办公系统 Demo

这是一个基于 uni-app 开发的 OA 办公系统演示项目，包含多个功能模块。

## 项目结构

```
test-oa-demo/
├── pages/                    # 页面目录
│   ├── audioplayer-demo/    # 音频播放器演示页面
│   └── attendance/           # 考勤打卡页面
├── uni_modules/             # uni-app 插件模块
│   └── hl-topvpn-uts/       # VPN 相关插件
├── static/                  # 静态资源
├── manifest.json            # 应用配置文件
└── pages.json               # 页面路由配置
```

## 功能模块

### 1. 考勤打卡模块

**页面路径**: `pages/attendance/index.vue`

**功能说明**:
- 自动获取当前位置信息（经纬度、地址）
- 显示详细的定位信息（经度、纬度、地址、精度、定位时间）
- 支持上班/下班打卡功能
- 记录打卡历史记录

**使用方法**:
1. 打开考勤打卡页面，系统会自动获取当前位置
2. 查看位置信息是否正确
3. 点击"上班打卡"或"下班打卡"按钮完成打卡
4. 打卡记录会显示在页面下方

**技术实现**:
- 使用 `uni.getLocation` API 获取位置信息
- 配置了高德地图定位服务（已在 manifest.json 中配置）
- 支持逆地理编码获取详细地址信息
- 使用 Vue 3 Composition API 开发

**配置说明**:
- 定位权限已在 `manifest.json` 中配置
- iOS 需要配置 `NSLocationWhenInUseUsageDescription` 权限说明
- Android 需要配置 `ACCESS_FINE_LOCATION` 和 `ACCESS_COARSE_LOCATION` 权限
- 高德地图 AppKey 已配置：`c913e46ffdf548ebc56ac1cf4d883e7e`

**注意事项**:
- 首次使用需要用户授权定位权限
- 建议在室外或信号良好的地方使用，定位更准确
- 打卡数据目前存储在本地，实际项目中需要提交到服务器

### 2. 音频播放器模块

**页面路径**: `pages/audioplayer-demo/index.vue`

**功能说明**:
- 音频播放控制（播放、暂停、停止、恢复）
- 支持多种播放引擎（MediaPlayer、SoundPool、AudioTrack）
- 显示播放进度和时长

## 开发环境

- uni-app 框架
- Vue 3
- HBuilderX 开发工具

## 配置说明

### 定位服务配置

定位服务使用高德地图，配置信息在 `manifest.json` 中：

```json
{
  "geolocation": {
    "amap": {
      "name": "amap_15931993294Bqxlq8EgG",
      "appkey_ios": "c913e46ffdf548ebc56ac1cf4d883e7e",
      "appkey_android": "c913e46ffdf548ebc56ac1cf4d883e7e"
    }
  }
}
```

### 权限配置

**iOS 权限说明**:
- `NSLocationWhenInUseUsageDescription`: "用于提供基于位置的服务，OA 打卡"
- `NSLocationAlwaysAndWhenInUseUsageDescription`: "用于后台提供基于位置的服务，OA 打卡"

**Android 权限**:
- `ACCESS_FINE_LOCATION`: 精确位置权限
- `ACCESS_COARSE_LOCATION`: 粗略位置权限

## 使用指南

### 运行项目

1. 使用 HBuilderX 打开项目
2. 选择运行到手机或模拟器
3. 确保设备已开启定位服务

### 访问考勤打卡页面

在应用中导航到考勤打卡页面，或直接访问路径：`pages/attendance/index`

## 后续改进建议

1. **服务器集成**: 将打卡数据提交到后端服务器保存
2. **位置验证**: 添加打卡位置范围验证（如必须在公司附近才能打卡）
3. **打卡规则**: 添加打卡时间限制（如上班时间范围）
4. **数据统计**: 添加打卡记录统计和报表功能
5. **地图显示**: 在地图上显示打卡位置
6. **离线支持**: 支持离线打卡，网络恢复后自动同步

## 常见问题

### Q: 定位失败怎么办？
A: 请检查：
1. 设备是否开启定位服务
2. 应用是否有定位权限
3. 是否在信号良好的地方
4. 高德地图 AppKey 是否正确配置

### Q: 地址显示不准确？
A: 逆地理编码需要网络支持，如果网络不好可能无法获取详细地址。可以尝试点击"刷新位置"按钮重新获取。

### Q: 打卡数据会丢失吗？
A: 当前版本数据存储在内存中，页面刷新会丢失。实际项目中需要将数据保存到本地存储或服务器。

## 更新日志

### 2024-01-XX
- ✅ 新增考勤打卡功能
- ✅ 集成高德地图定位服务
- ✅ 实现位置信息获取和显示
- ✅ 实现打卡记录功能
